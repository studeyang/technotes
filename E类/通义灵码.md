> 参考资料：http://help.aliyun.com/zh/lingma/?spm=a2c4g.11186623.help-sub-nav.2.3faa2b69AGv7zN

# 01 | 了解产品

核心能力

- 代码补全
- 智能问答
- 文件编辑
- 智能体



# 02 | 快速上手



# 03 | 使用指南

## 3.1 智能会话

### 规则配置



# 04 | 使用实践

## 4.1 编码使用实践

### 代码注释的运用

在缺乏额外注释引导的情况下，模型只能基于当前代码的上下文，以及项目中引用和找到的相似代码来推测接下来可能要编写的内容。当模型的推测不准确时，可以通过增加代码的方式来引导模型实现所需的代码。

![image](https://technotes.oss-cn-shenzhen.aliyuncs.com/2024/202602022317584.png)

### **跨文件索引的运用**

1、及时保存文件并更新索引

例如在某代码项目中，我们为 Pet 对象新增了一个 saleable 属性。

![7a202c9956cfdc8db24d142537153372](https://technotes.oss-cn-shenzhen.aliyuncs.com/2024/202602022323438.png)

在编辑完前一个文件后，主动按下文件保存键`快捷键Ctrl+S`，然后再继续编辑其他文件。这样生成的内容将能够正确引用到修改过的对象结构。

![image](https://technotes.oss-cn-shenzhen.aliyuncs.com/2024/202602022323565.png)

### 及时清理上下文信息

1、适时清空上下文

用户可以单击问答面板顶部的新建会话按钮，以在新的会话中进行提问，或使用`/clear context`命令清空上下文，以减少前文对后续问答的干扰。

![image](https://technotes.oss-cn-shenzhen.aliyuncs.com/2024/202602022327163.png)

### 基于代码提问

1、通用问答

可以先在代码编辑器中选择一段代码，然后在问答区针对该段代码进行提问

2、内置代码任务

第一种方式，是使用IDE下拉菜单的方法。

![image](https://technotes.oss-cn-shenzhen.aliyuncs.com/2024/202602022330392.png)

第二种方式，选择代码后右键单击鼠标，并从上下文菜单中选择“通义灵码”选项。

![整屏示例@1x](https://technotes.oss-cn-shenzhen.aliyuncs.com/2024/202602022330396.png)

第三种方式，选择代码后在问答面板输入斜线（/）以激活内置任务菜单，接着选择相应的任务。

![整屏示例@1x](https://technotes.oss-cn-shenzhen.aliyuncs.com/2024/202602022331096.png)

### 提示词的使用技巧

1、**在提问中引用所选代码**

在提问时，如果同时在代码编辑区选择了文本或代码段，所选择的内容将自动以 Markdown 引用格式附加到提问内容的末尾。因此，若在提示词中提及所选择的代码，应使用“如下代码”或“以下内容”，例如。

- 正确的说法：请检查以下代码是否存在下标越界风险。
- 错误的说法：请检查选中的代码是否存在下标越界风险。 （模型并不知道选中的代码是什么）

2、**在使用命令时，请附加相关信息。**

通过在命令后追加更多的辅助信息，可以为问答提供更为丰富的上下文，从而获得更符合预期的回复。

![整屏示例@1x (1)](https://technotes.oss-cn-shenzhen.aliyuncs.com/2024/202602022333789.png)

3、**通过多轮对话生成有效代码**

在与大语言模型进行对话时，提供的上下文越丰富，生成的结果越能符合用户的预期。因此，用户可以在上一轮对话的基础上继续进行问答，从而增加后续提问的上下文信息，这样生成的结果能够更好地反映整个历史上下文。

4、**为模型提供参考示例**

对比下述两种提示词，后者能够更稳定地输出预期的数据格式。

- 提示词1：将测试报告整理为JSON格式，每个测试结果为一个JSON结构。用例名称应放置于name字段，成功与否应记录于success字段，运行耗时需在duration字段中体现（单位为毫秒），测试覆盖率则应放置在coverage字段。detail字段的值为一个JSON，包含每次用例的输入和输出，分别存放于input和output字段中。

- 提示词2：将测试报告整理为JSON格式，具体格式参照输入报告。

  ```plaintext
  …报告内容略…
  ```

  应输出的数据如下。请根据此示例生成测试报告。

  ```json
  [
    {
      “name”: “超出有效页码范围时，应返回空列表并提示无更多数据”,
    “duration”: 3434,
    “coverage”: 80,
    “detail”: [
      {
        “input”: “…”,
      “output”: “…”
      }
    ]
    }
  ]
  ```

## 4.2 单元测试

单元测试具有提高代码质量、提高开发效率、便于重构和维护、有助于团队协作等多种价值。

好的单元测试应遵循以下原则：

1. 自动化（A）：单元测试应能被自动化执行，以便在代码更改时快速确认新加入的代码没有破坏已有功能。
2. 独立性（I）：每个单元测试应当是独立的，不能依赖于其他测试的执行顺序或结果。
3. 可重复执行（R）：好的单元测试在同样的条件下，每次运行应当给出相同的结果。

### 单元测试实践

1、手工选中代码方式生成

选中代码后，在通义灵码的问答框内，通过 `/unittest`来生成与选中的代码对应的单元测试。

![整屏示例@1x (5)](https://technotes.oss-cn-shenzhen.aliyuncs.com/2024/202602032250750.png)

2、**使用快捷按钮方式生成**

通义灵码每个方法签名的上面都会有一个小图标，单击图标后会弹出相应的命令菜单，选择生成单元测试。

也可以选择要生成的代码块，然后单击右键来选择生成单元测试功能。

### 维护遗留代码

解决遗留代码有以下三种常见的处理方法：

| **处理方式** | **利弊**                                                     |
| ------------ | ------------------------------------------------------------ |
| 推翻重来     | 成本高，系统正在运行，会带来代码风险。                       |
| 进行重构     | 成本高，系统正在运行，会带来代码风险。                       |
| 补充单元测试 | 通过单元测试识别现有代码中的问题，为未来可能的代码变更提供质量保障。 |

**使用通义灵码处理遗留代码**

1、针对算法类（Algorithms）代码生成单元测试

在生成时，请注意所需的框架及Mock等依赖信息，可以通过生成单元测试命令后追加相关信息进行补充。如 `/generate unit testing CppUTest`。

2、超复杂的代码（Overcomplicated Code）找机会进行重构

针对复杂遗留代码的优化，并不建议开发者们盲目进行全面的优化和重构。遗留代码的变更可能会带来巨大的风险。因此，开发者应根据具体情况，在合适的机会，遵守[童子军法则](https://www.oreilly.com/library/view/97-things-every/9780596809515/ch08.html)，进行重构和优化。

## 4.3 效能实践

### 衡量AI辅助编程带来的收益

具体可以从以下几个方面衡量：

1、编码效率：开发者的编码时间占比 × AI生成代码占比 = 节省的开发时间比例。例如，员工有30%的时间花在编码上，AI生成了40%的代码，则可以理解为节省了12%的开发时间。

![image](https://technotes.oss-cn-shenzhen.aliyuncs.com/2024/202602032335831.png)

2、代码的缺陷密度：代码的缺陷密度是一个滞后指标，反映代码质量，如千行代码缺陷量。

3、员工编程体验的满意度：员工编程体验的满意度是一个主观指标，反映工具对于员工编程工作的帮助，如工具的易用性和实际工具的使用效果。

